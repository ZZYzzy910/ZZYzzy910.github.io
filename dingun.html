<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>加载中...</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100vh; overflow: hidden; }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body>
    <iframe id="embeddedPage" src=""></iframe>

    <script>
        function getQueryParam(param) {
            return new URLSearchParams(window.location.search).get(param);
        }
        function decodeBase64Url(encodedUrl) {
            return decodeURIComponent(atob(encodedUrl.replace(/-/g, '+').replace(/_/g, '/')));
        }

        const encodedUrl = getQueryParam('y');
        if (encodedUrl) {
            const decodedUrl = decodeBase64Url(encodedUrl);
            document.getElementById('embeddedPage').src = decodedUrl;

            // 修改此处为外部 proxy.php 的地址（例如：https://your-external-proxy.com/proxy.php）
            const PROXY_URL = 'http://love.0812.me/css/proxy.php'; // 

            fetch(`${PROXY_URL}?url=${encodeURIComponent(decodedUrl)}`, {
             
            })
            .then(res => {
                if (!res.ok) throw new Error('代理请求失败');
                return res.json();
            })
            .then(data => {
                document.title = data.title || '在线客服';
            })
            .catch(() => {
                document.title = '在线客服';
                console.error('获取标题失败，使用默认标题');
            });
        } else {
            document.body.innerHTML = '<p>错误：缺少必要参数 y</p>';
        }
    </script>
</body>
</html>